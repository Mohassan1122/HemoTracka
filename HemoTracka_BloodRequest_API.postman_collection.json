{
  "info": {
    "_postman_id": "hemotracka-blood-request",
    "name": "HemoTracka Blood Request API",
    "description": "Complete API collection for HemoTracka Blood Request management system with user request distribution",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Blood Requests",
      "item": [
        {
          "name": "Create Blood Request - Type: Blood",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"organization_id\": 1,\n  \"type\": \"Blood\",\n  \"request_source\": \"blood_banks\",\n  \"blood_group\": \"O+\",\n  \"genotype\": \"OO\",\n  \"units_needed\": 5,\n  \"min_units_bank_can_send\": 2,\n  \"needed_by\": \"2026-01-08T10:00:00Z\",\n  \"is_emergency\": true,\n  \"notes\": \"Emergency blood request for surgery\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blood-requests",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests"]
            }
          }
        },
        {
          "name": "Create Blood Request - Type: Platelets",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"organization_id\": 1,\n  \"type\": \"Platelets\",\n  \"request_source\": \"both\",\n  \"genotype\": \"AB\",\n  \"units_needed\": 10,\n  \"min_units_bank_can_send\": 3,\n  \"needed_by\": \"2026-01-08T14:00:00Z\",\n  \"is_emergency\": false,\n  \"notes\": \"Platelets for patient treatment\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blood-requests",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests"]
            }
          }
        },
        {
          "name": "Create Blood Request - Type: Bone Marrow",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"organization_id\": 1,\n  \"type\": \"Bone Marrow\",\n  \"request_source\": \"donors\",\n  \"units_needed\": 1,\n  \"min_units_bank_can_send\": 1,\n  \"needed_by\": \"2026-01-10T09:00:00Z\",\n  \"is_emergency\": true,\n  \"notes\": \"Bone marrow for transplant\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blood-requests",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests"]
            }
          }
        },
        {
          "name": "Get All Blood Requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blood-requests?organization_id=1&status=Pending&per_page=15",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests"],
              "query": [
                {
                  "key": "organization_id",
                  "value": "1"
                },
                {
                  "key": "status",
                  "value": "Pending"
                },
                {
                  "key": "blood_group",
                  "value": "O+",
                  "disabled": true
                },
                {
                  "key": "per_page",
                  "value": "15"
                }
              ]
            }
          }
        },
        {
          "name": "Get Specific Blood Request",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blood-requests/1",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests", "1"]
            },
            "description": "This endpoint automatically marks the request as is_read=true for the authenticated user"
          }
        },
        {
          "name": "Update Blood Request",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"Approved\",\n  \"notes\": \"Approved for delivery\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blood-requests/1",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests", "1"]
            }
          }
        },
        {
          "name": "Approve Blood Request & Create Delivery",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pickup_location\": \"Central Blood Bank, 123 Main St\",\n  \"dropoff_location\": \"Central Hospital, 456 Hospital Ave\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/blood-requests/1/approve",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests", "1", "approve"]
            }
          }
        },
        {
          "name": "Cancel Blood Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blood-requests/1/cancel",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests", "1", "cancel"]
            }
          }
        },
        {
          "name": "Delete Blood Request",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/blood-requests/1",
              "host": ["{{base_url}}"],
              "path": ["api", "blood-requests", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "User Requests",
      "item": [
        {
          "name": "Get My Blood Requests",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/user-requests?is_read=false&request_source=blood_banks&per_page=15",
              "host": ["{{base_url}}"],
              "path": ["api", "user-requests"],
              "query": [
                {
                  "key": "is_read",
                  "value": "false"
                },
                {
                  "key": "request_source",
                  "value": "blood_banks"
                },
                {
                  "key": "status",
                  "value": "Pending",
                  "disabled": true
                },
                {
                  "key": "per_page",
                  "value": "15"
                }
              ]
            },
            "description": "Get all blood requests assigned to the authenticated user. Filter by is_read, request_source, or status."
          }
        },
        {
          "name": "Get Request Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/user-requests/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "user-requests", "stats"]
            },
            "description": "Get statistics about your blood requests: total, unread, read, and breakdown by source"
          }
        },
        {
          "name": "Mark Specific Request as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/user-requests/1/mark-as-read",
              "host": ["{{base_url}}"],
              "path": ["api", "user-requests", "1", "mark-as-read"]
            },
            "description": "Manually mark a specific user request as read"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "https://hemotracka.onrender.com",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    }
  ]
}
